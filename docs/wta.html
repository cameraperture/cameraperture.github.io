<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Charlotte Imbert">
<meta name="dcterms.date" content="2022-12-15">
<meta name="description" content="An examination of the relationship between height and the number of aces per match for female professional tennis players in the Women’s Tennis Association 2022 year-end Top 100.">

<title>Charlotte Imbert - Advantage, Height: Do Taller Female Professional Tennis Players Serve Better?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Charlotte Imbert</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">About Me</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-statistical-analyses" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Statistical Analyses</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-statistical-analyses">    
        <li>
    <a class="dropdown-item" href="./mlb_pdf.html">
 <span class="dropdown-text">MLB Bat Speed and Swing Length</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./atp.html">
 <span class="dropdown-text">How to Win in Tennis - ATP</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./wta.html">
 <span class="dropdown-text">Height and Serve Performance in Tennis - WTA</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./swift.html">
 <span class="dropdown-text">Taylor Swift and Kacey Musgraves Lyrical ANOVA</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-data-visualization" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Data Visualization</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-data-visualization">    
        <li>
    <a class="dropdown-item" href="./olympics.html">
 <span class="dropdown-text">Olympics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./premierleague.html">
 <span class="dropdown-text">Premier League</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./shakespeare.html">
 <span class="dropdown-text">Shakespeare</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-data-science-projects" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Data Science Projects</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-data-science-projects">    
        <li>
    <a class="dropdown-item" href="./presentation.html">
 <span class="dropdown-text">Final Presentation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./project4.html">
 <span class="dropdown-text">SQL</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./miniproject3.html">
 <span class="dropdown-text">Permutation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./miniproject2.html">
 <span class="dropdown-text">Text Analysis</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#methods" id="toc-methods" class="nav-link" data-scroll-target="#methods">Methods</a></li>
  <li><a href="#data-analysis" id="toc-data-analysis" class="nav-link" data-scroll-target="#data-analysis">Data Analysis</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Advantage, Height: Do Taller Female Professional Tennis Players Serve Better?</h1>
</div>

<div>
  <div class="description">
    <p>An examination of the relationship between height and the number of aces per match for female professional tennis players in the Women’s Tennis Association 2022 year-end Top 100.</p>
  </div>
</div>


<div class="quarto-title-meta column-page-left">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Charlotte Imbert </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 15, 2022</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>It is common knowledge that height provides an advantage in certain sports, most notably basketball. When it comes to professional tennis however, height is less commonly associated with success. Should height be considered an important factor in tennis-playing ability? Here we will seek to determine if a height advantage exists in professional women’s tennis, specifically in terms of the serve. This is arguably the most important shot in the sport as it initiates each point. It seems logical for a taller player to serve faster as she would be able to strike the ball down from a greater height than a shorter player, resulting in more power. Cernosek and Vaverka (2016) attribute height to a ‘biomechanical advantage that helps [players] obtain a higher serve speed: taller players with longer limbs will achieve a higher peripheral racket speed at the moment of hitting the ball than shorter players with the same angular velocity of upper extremity segments’ <span class="citation" data-cites="cernosek2016">(<a href="#ref-cernosek2016" role="doc-biblioref">Cernosek and Vaverka 2016</a>)</span>. Additionally, Bonato et al.&nbsp;(2015) found height to be ‘the main anthropometric determinant of serve speed in professional tennis players’ <span class="citation" data-cites="bonato2015">(<a href="#ref-bonato2015" role="doc-biblioref">Bonato et al. 2015</a>)</span>. However, this study only looked at 8 professional players, all of which were male. Cernosek and Vaverka’s (2016) analysis was more substantial as it looked at both male and female tennis players who competed at all four Grand Slam tournaments between 2008 and 2012. Their analysis found statistically significant positive correlations between body height and first serve speed <span class="citation" data-cites="cernosek2016">(<a href="#ref-cernosek2016" role="doc-biblioref">Cernosek and Vaverka 2016</a>)</span>. Similarly, Gallagher et al.’s (2021) analysis of more recent data from the 2013 to 2019 Grand Slam tournaments found ‘a strong positive correlation between the median percent of aces per match and height’ for both male and female players <span class="citation" data-cites="gallagher2021">(<a href="#ref-gallagher2021" role="doc-biblioref">Gallagher, Frisoli, and Luby 2021</a>)</span>. An ace is a serve that is not returned by the opponent. Thus, an ace count indicates the number of points a player wins using only their serve. With an increased likelihood of serving faster, taller players may hit more aces as a fast serve ‘puts the opponent under stress and may hinder its return’ <span class="citation" data-cites="martin2018">(<a href="#ref-martin2018" role="doc-biblioref">Martin 2018</a>)</span>. However, Martin (2018) further states that serve speed is not the only factor in determining ace count as spin and placement are also important <span class="citation" data-cites="martin2018">(<a href="#ref-martin2018" role="doc-biblioref">Martin 2018</a>)</span>. As explained by Cernosek and Vaverka (2016), taller players ‘will achieve higher hand-racket angular momentum’ which may give them an advantage in terms of spin and placement <span class="citation" data-cites="cernosek2016">(<a href="#ref-cernosek2016" role="doc-biblioref">Cernosek and Vaverka 2016</a>)</span>.</p>
<p>This analysis will contribute to the discussion on the effect of height on the professional tennis serve by providing insight on some of the most recent data available: we will examine the female players comprising the Women’s Tennis Association (WTA) top 100 rankings as of December 7th, 2022 <span class="citation" data-cites="wta2022">(<a href="#ref-wta2022" role="doc-biblioref">WTA.com 2022</a>)</span>. Moreover, unlike previous studies, this analysis will not be limited to the Grand Slam tournaments and will instead take into account all tournaments in 2022 that contributed to professional ranking points. We will try to determine if a relationship exists between player height and the number of aces hit per match. Taking the aforementioned biomechanical factors into account, we will attempt to see if taller female professional players are better servers and perhaps better tennis players, the ability to win service games being crucial to winning matches.</p>
</section>
<section id="methods" class="level2">
<h2 class="anchored" data-anchor-id="methods">Methods</h2>
<p>The sample used in this analysis consists of the players ranked in the WTA top 100 rankings as of December 7th, 2022. The two variables we are interested in are player height (in cm) and the number of aces hit per match. Data regarding height, number of aces and number of matches played in 2022 was obtained from the ‘Stats’ section on the WTA website. The matches included in these statistics consist of all of the professional matches played on the WTA circuit in the 2022 calendar year in addition to those played at the Grand Slam tournaments, managed by the International Tennis Federation.&nbsp; As the WTA does not provide an aces per match statistic, this had to be calculated separately in Excel instead. It was decided to observe aces hit per match rather than the total number of aces hit in the year as the former provides a better indication of a player’s serving ability. This is because there is great variability between the numbers of matches played by each player in a season due to factors such as injury, illness, ranking, finances, sponsorships, nationality or pregnancy. It is logical to assume that a player who has played more matches in the year will have a higher total ace count, and consequently an aces per match statistic is more representative.</p>
<p>As the data being considered is a rankings list, it was not randomly sampled. It was decided to observe the top 100 players because this threshold typically represents the most elite performers in the sport. Consequently, lack of playing experience or differing skill level are likely to play a smaller part in the results observed, allowing us to focus more on the effect of height. The results of this analysis will therefore apply to professionals rather than amateurs. Additionally, observing 100 players allows for a balance between the time-consuming nature of manual data input into Excel and the maximization of sample size. Data for two players, ranked 72 and 92, could not be used as the WTA database did not include these players’ heights. Their heights could not be found on other online databases. In order to keep a sample size of 100, data from the players ranked 101 and 102 was used instead.</p>
</section>
<section id="data-analysis" class="level2">
<h2 class="anchored" data-anchor-id="data-analysis">Data Analysis</h2>
<p>As the two variables in question are numeric, any potential relationship between them can be identified using a regression. An initial least-squares regression of the form y = β0 + β1x&nbsp; was carried out, with intercept β0 and slope β1. In a situation where no relationship exists between height and the number of aces per match, the best-fitting line is expected to be flat. Therefore, H0 : β1 = 0 and HA : β1 ≠ 0. The least-squares regression yielded a line with β1 = 0.15611 (Figure 1), and the t-statistic for this slope value was 7.105 with a p-value of 0.0000000001953. While this very low p-value seems to indicate that there exists a relationship between height and the number of aces per match, the suitability of this linear fit must be checked before any conclusions can be drawn.&nbsp;</p>
<p>The residual plot shown in Figure 2 allows us to assess the suitability of the linear model. The three underlying assumptions for using a linear regression are that the residuals display linearity, homoskedasticity and normality. The linearity assumption seems fulfilled here as there appears to be a roughly even number of points scattered either side of the residual = 0 line. However, the residuals show heteroskedasticity as variability increases with height, notably from approximately 170 cm onwards (Figure 2). Log-transforming both variables in the linear model (Figure 4) yields a more appropriate fit which is more successful at fulfilling not only the linearity assumption but also the homoskedasticity and normality assumptions. The residual plot in Figure 5 shows points scattered either side of the residual = 0 line with much more constant variance than the one resulting from the linear model (Figure 2). The Normal Q-Q plot in Figure 6 shows that the residuals resulting from the log-transformed linear model are closer to normality than those resulting from the linear model (Figure 3). It is not a concern that these log-transformed residuals do not show perfect normality as the sample size of 100 is large, meaning that the central limit theorem is in place. The log-transformed fit is therefore a more appropriate model for the data as it satisfies these three assumptions much more suitably than the linear model.&nbsp;</p>
<p>This log-transformed regression takes the form log(y) = β0 + β1log(x), while the hypotheses remain H0 : β1 = 0 and HA : β1 ≠ 0. The regression yields a β1 value of 11.366, with a t-statistic of 6.479 and p-value of 0.00000000371. We once again observe an extremely low p-value, much lower than&nbsp; α = 0.05. This p-value indicates that it is virtually impossible to have observed such structured data in a world where no relationship exists between the two variables. Therefore, we can reject H0 : β1 = 0. Back-transforming the x and y variables of this log-transformed model informs us that the number of aces per match will increase on average by 0.16 for each 1 cm increase in height. With a multiple R-squared value of 0.2999, we can infer that there exists a moderate positive correlation between player height and the number of aces per match. This value indicates that just under a third of the variation in the number of aces per match can be explained by height. The residual standard error of 0.5626 refers to the variability in the number of aces per match that can be explained by factors other than height. Three outliers (observations 59, 62 and 76, Figure 4) exemplify the influence of these other factors as these players have aces per match counts contradictory to what would be expected for their heights.</p>
<p><img src="docs/wta1.jpg" class="img-fluid"><br>
</p>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>Overall, a moderate positive correlation was found between a professional tennis player’s height and her number of aces hit per match. While not perfect by any means, a log-transformed linear regression model was deemed a suitable approximation for the data, predicting a mean increase of about 0.16 aces per match for each 1 cm increase in height. This model also suggests that just under a third of the variability in the number of aces per match can be explained by height in female professional tennis. The rest of the variability can be explained by factors including technique, strength, strategy, court surface (fast versus slow court) and weather conditions. These other factors can be used to provide explanations for the three outliers observed in the data: three taller players underperformed according to the log-transformed model, hitting fewer aces per match than expected. These players may have played a higher proportion of their matches on clay courts, where the conditions are slower and therefore less conducive to aces. Alternatively, they may have used less effective technique or strategy than other players. It is possible that using a larger sample size would have resulted in a stronger correlation between height and aces per match. This analysis only considers the top 100 female players in the world. If instead the WTA’s top 1000 players were considered, a clearer pattern between the two variables may emerge.&nbsp;</p>
<p>While the data supports the suggestion that a taller professional female tennis player is likely to hit more aces per match than her shorter colleagues, it must be noted that this does not necessarily make her a better server. While ace counts give us a good indication of a player’s serving ability, they are not the best metric. Many times, a good serve can force the opponent to miss her return while still hitting the ball with the racket. This means that these serves, while effective, are not classified as aces as the returner’s racket touched the ball. Additionally, this analysis did not consider double faults or first serve percentages. A player may serve in a risky way that results in a high ace count counterbalanced by a high double-fault count or a lower first serve percentage. This would result in an overall serving ability that is not reflected in a simple aces per match count. A statistic such as a player’s percentage of service games won would be a more suitable reflection of her serving ability. Carrying out a similar analysis looking at this statistic instead of the number of aces per match would consequently be more representative of serving and overall tennis ability.</p>



</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-bonato2015" class="csl-entry" role="listitem">
Bonato, M., M. A. Maggioni, C. Rossi, S. Rampichini, A. La Torre, and G. Merati. 2015. <span>“Relationship Between Anthropometric or Functional Characteristics and Maximal Serve Velocity in Professional Tennis Players.”</span> <em>J. Sports Med. Phys. Fitness</em> 55: 1157–65.
</div>
<div id="ref-cernosek2016" class="csl-entry" role="listitem">
Cernosek, M., and F. Vaverka. 2016. <span>“Quantitative Assessment of the Serve Speed in Tennis.”</span> <em>Sports Biomechanics</em> 15: 48–60.
</div>
<div id="ref-gallagher2021" class="csl-entry" role="listitem">
Gallagher, S. K., K. Frisoli, and A. Luby. 2021. <span>“Opening up the Court: Analyzing Player Performance Across Tennis Grand Slams.”</span> <em>Journal of Quantitative Analysis in Sports</em> 17: 255–71.
</div>
<div id="ref-martin2018" class="csl-entry" role="listitem">
Martin, C. 2018. <span>“Biomechanics of the Tennis Serve.”</span> In <em>Tennis Medicine</em>, edited by G. Di Giacomo, T. S. Ellenbecker, and W. B. Kibler. Springer, Cham. <a href="https://doi.org/10.1007/978-3-319-71498-1_1">https://doi.org/10.1007/978-3-319-71498-1_1</a>.
</div>
<div id="ref-wta2022" class="csl-entry" role="listitem">
WTA.com. 2022. <span>“Women’s Tennis Records and Statistics.”</span>
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>